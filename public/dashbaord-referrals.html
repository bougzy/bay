<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Referrals & Notifications</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body class="bg-dark text-light">
  <nav class="navbar navbar-dark bg-black px-3">
    <a href="dashboard-deposits.html" class="nav-link">Deposits</a>
    <a href="dashboard-plans.html" class="nav-link">Plans</a>
    <a href="dashboard-referrals.html" class="navbar-brand">Referrals</a>
    <a href="dashboard-trading.html" class="nav-link">Copy-Trading</a>
    <a href="dashboard-messages.html" class="nav-link">Messages</a>
  </nav>

  <div class="container py-4">
    <h2>Your Referrals</h2>
    <ul class="list-group mb-4" id="referrals"></ul>

    <h2>Notifications</h2>
    <ul class="list-group" id="notifications"></ul>
  </div>

  <script src="./js/api.js"></script>
  <script src="./js/dashboard-referrals.js"></script>
  <script>
    // Save current dashboard page as last visited
localStorage.setItem("lastPage", window.location.pathname.split("/").pop());

    document.addEventListener("DOMContentLoaded", async () => {
  // Load Referrals
  const referralsRes = await API.referrals();
  const referrals = await referralsRes.json();
  const refList = document.getElementById("referrals");
  referrals.forEach(r => {
    refList.innerHTML += `<li class="list-group-item bg-dark text-light">${r.email}</li>`;
  });

  // Load Notifications
  const notifRes = await API.notifications();
  const notifs = await notifRes.json();
  const notifList = document.getElementById("notifications");
  notifs.forEach(n => {
    notifList.innerHTML += `<li class="list-group-item bg-secondary text-light">${n.message}</li>`;
  });
});

  </script>
</body>
</html>
